<a [routerLink]="['/incident', incident().id]" class="block">
  <div class="rounded-lg border-l-4 p-4 shadow-md transition-transform hover:scale-[1.02] hover:shadow-xl bg-white h-full flex flex-col"
      [class]="statusColorClass().border + ' ' + statusColorClass().bg">
    
    <div class="flex-grow">
      <div class="flex justify-between items-start mb-2">
        <h3 class="text-lg font-bold text-gray-800 pr-4">{{ incident().title }}</h3>
        <span class="text-xs font-semibold px-2.5 py-0.5 rounded-full flex-shrink-0" [class]="priorityClass()">
          {{ incident().priority }}
        </span>
      </div>

      <div class="text-sm text-gray-500 space-y-2 mb-3">
        <div class="flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
          </svg>
          <span>Assigned to: <strong class="font-medium text-gray-700">{{ incident().assignedTo }}</strong></span>
        </div>
        <div class="flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" />
          </svg>
          <span>Incident ID: <strong class="font-mono text-xs text-gray-700">{{ incident().id }}</strong></span>
        </div>
      </div>
    </div>
    
    @if(incident().aiGist) {
      <div class="mt-auto pt-3 border-t border-dashed border-gray-300">
        <div class="flex items-start text-xs">
          <svg class="h-4 w-4 mr-2 text-blue-500 flex-shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 01-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 013.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 013.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 01-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.572L16.5 21.75l-.398-1.178a3.375 3.375 0 00-2.456-2.456L12.5 18l1.178-.398a3.375 3.375 0 002.456-2.456L16.5 14.25l.398 1.178a3.375 3.375 0 002.456 2.456L20.25 18l-1.178.398a3.375 3.375 0 00-2.456 2.456z" /></svg>
          <p class="text-gray-600 italic"><strong class="font-semibold text-blue-700 not-italic">AI Gist:</strong> {{ incident().aiGist }}</p>
        </div>
      </div>
    }

    <div class="mt-3 pt-3 border-t border-gray-200 flex justify-between items-center">
      <span class="text-xs text-gray-500">Time to Breach</span>
      <span class="text-2xl font-mono font-bold tracking-wider" [class]="statusColorClass().text">
        {{ formattedTimeRemaining() }}
      </span>
    </div>
  </div>
</a>