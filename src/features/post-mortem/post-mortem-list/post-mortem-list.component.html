<main class="container mx-auto p-4 sm:p-6 lg:p-8">
  <!-- Header -->
  <header class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800 flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-3 text-blue-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 15.75l-2.489-2.489m0 0a3.375 3.375 0 10-4.773-4.773 3.375 3.375 0 004.774 4.774zM21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      Post-Mortem Hub
    </h1>
    <p class="mt-1 text-gray-500">A central repository for incident reviews and follow-up action items.</p>
  </header>

  <!-- Post-Mortems Table -->
  <div class="bg-white rounded-lg shadow-md overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full text-sm text-left text-gray-500">
        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3">Incident</th>
            <th scope="col" class="px-6 py-3">Date</th>
            <th scope="col" class="px-6 py-3">Action Items Progress</th>
            <th scope="col" class="px-6 py-3 text-right">Actions</th>
          </tr>
        </thead>
        <tbody>
          @for(pm of postMortemsWithProgress(); track pm.id) {
            <tr class="bg-white border-b hover:bg-gray-50">
              <td class="px-6 py-4">
                <p class="font-medium text-gray-900">{{ pm.incidentTitle }}</p>
                <p class="text-xs font-mono text-gray-500">{{ pm.incidentId }}</p>
              </td>
              <td class="px-6 py-4">
                {{ pm.date | date:'longDate' }}
              </td>
              <td class="px-6 py-4">
                <div class="flex items-center">
                  <div class="w-full bg-gray-200 rounded-full h-2.5 mr-3">
                    <div class="h-2.5 rounded-full" 
                         [class]="pm.progress < 50 ? 'bg-red-500' : pm.progress < 100 ? 'bg-yellow-500' : 'bg-green-500'"
                         [style.width]="pm.progress + '%'"></div>
                  </div>
                  <span class="text-sm font-semibold text-gray-700">{{ pm.progress }}%</span>
                </div>
              </td>
              <td class="px-6 py-4 text-right">
                <a [routerLink]="['/post-mortem', pm.id]" class="font-medium text-blue-600 hover:underline">View Details</a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</main>