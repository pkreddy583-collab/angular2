<div class="relative pl-6">
  <!-- Connection line from parent -->
  <div class="absolute -left-0 top-4 h-full w-6 border-l border-b border-gray-300 rounded-bl-lg"></div>
  <div class="absolute -left-0 top-4 h-px w-6 border-t border-gray-300"></div>

  <!-- Node Content -->
  <div class="relative pt-2">
    <div class="p-2 rounded-md border" [class]="isExpensive() ? 'bg-red-50 border-red-400' : 'bg-gray-50 border-gray-300'">
      <p class="font-semibold text-sm" [class]="isExpensive() ? 'text-red-800' : 'text-gray-800'">
        {{ node.operation }} <span *ngIf="node.objectName" class="font-mono text-blue-700">{{ node.objectName }}</span>
      </p>
      <div class="flex gap-4 text-xs text-gray-600 mt-1">
        <span>Cost: {{ node.cost }}</span>
        <span>Rows: {{ node.rows | number }}</span>
        <span>Bytes: {{ node.bytes | number }}</span>
      </div>
    </div>

    <!-- Children -->
    <div *ngIf="node.children && node.children.length > 0" class="mt-2 space-y-2">
      <app-explain-plan-node *ngFor="let child of node.children; trackBy: trackByOperation" [node]="child" />
    </div>
  </div>
</div>
